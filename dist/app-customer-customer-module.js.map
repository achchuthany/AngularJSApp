{"version":3,"sources":["webpack:///./src/app/customer/can-activate.guard.ts","webpack:///./src/app/customer/can-deactivate.guard.ts","webpack:///./src/app/customer/customer-details.component.css","webpack:///./src/app/customer/customer-details.component.html","webpack:///./src/app/customer/customer-details.component.ts","webpack:///./src/app/customer/customer-edit.component.css","webpack:///./src/app/customer/customer-edit.component.html","webpack:///./src/app/customer/customer-edit.component.ts","webpack:///./src/app/customer/customer-orders.component.html","webpack:///./src/app/customer/customer-orders.component.ts","webpack:///./src/app/customer/customer-routing.module.ts","webpack:///./src/app/customer/customer.component.html","webpack:///./src/app/customer/customer.component.ts","webpack:///./src/app/customer/customer.module.ts"],"names":[],"mappings":"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","file":"app-customer-customer-module.js","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { CanActivate, Router, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\n\r\nimport { AuthService } from '../core/services/auth.service';\r\n\r\n@Injectable()\r\nexport class CanActivateGuard implements CanActivate {\r\n\r\n  constructor(private authService: AuthService, private router: Router) { }\r\n\r\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<boolean> | Promise<boolean> | boolean {\r\n    if (this.authService.isAuthenticated) {\r\n        return true;\r\n    }\r\n\r\n    // Track URL user is trying to go to so we can send them there after logging in\r\n    this.authService.redirectUrl = state.url;\r\n    this.router.navigate(['/login']);\r\n    return false;\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { CanDeactivate, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\n\r\nimport { CustomerEditComponent } from './customer-edit.component';\r\nimport { LoggerService } from '../core/services/logger.service';\r\n\r\n@Injectable()\r\nexport class CanDeactivateGuard implements CanDeactivate<CustomerEditComponent> {\r\n\r\n  constructor(private logger: LoggerService) {}\r\n\r\n  canDeactivate(\r\n    component: CustomerEditComponent,\r\n    route: ActivatedRouteSnapshot,\r\n    state: RouterStateSnapshot\r\n  ): Observable<boolean> | Promise<boolean> | boolean {\r\n\r\n    this.logger.log(`CustomerId: ${route.parent.params['id']} URL: ${state.url}`);\r\n\r\n    // Check with component to see if we're able to deactivate\r\n    return component.canDeactivate();\r\n  }\r\n}\r\n","module.exports = \".details-image {\\r\\n    height:100px;width:100px;margin-top:10px;\\r\\n}\"","module.exports = \"<div class=\\\"container\\\" *ngIf=\\\"customer\\\">\\r\\n  <div class=\\\"row\\\">\\r\\n    <div class=\\\"col-md-2\\\">\\r\\n      <img src=\\\"assets/images/{{customer.gender | lowercase}}.png\\\" class=\\\"details-image\\\" />\\r\\n    </div>\\r\\n    <div class=\\\"col-md-10\\\">\\r\\n      <h4>    \\r\\n          {{ customer.firstName | capitalize }} {{ customer.lastName | capitalize }}&nbsp;          \\r\\n      </h4>\\r\\n      <br />\\r\\n      {{ customer.address }}\\r\\n      <br />\\r\\n      {{ customer.city }}, {{ customer.state.name }}\\r\\n    </div>\\r\\n  </div>    \\r\\n  <br /><br />\\r\\n  <div class=\\\"row\\\">\\r\\n    <div class=\\\"col-md-12\\\" *ngIf=\\\"customer && customer.latitude && customer.longitude\\\">\\r\\n      <cm-map [latitude]=\\\"customer.latitude\\\" \\r\\n           [longitude]=\\\"customer.longitude\\\" \\r\\n           [zoom]=\\\"10\\\" \\r\\n           [enabled]=\\\"mapEnabled\\\"\\r\\n           [markerText]=\\\"'<h3>' + customer.firstName + ' ' + customer.lastName + '</h3>' + customer.city + ', ' + customer.state.name\\\"></cm-map>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>   \\r\\n<div *ngIf=\\\"!customer\\\" class=\\\"container\\\">\\r\\n   No water tank found\\r\\n</div>  \"","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Params } from '@angular/router';\r\n\r\nimport { ICustomer } from '../shared/interfaces';\r\nimport { DataService } from '../core/services/data.service';\r\n\r\n@Component({\r\n  selector: 'cm-customer-details',\r\n  templateUrl: './customer-details.component.html',\r\n  styleUrls: ['./customer-details.component.css']\r\n})\r\nexport class CustomerDetailsComponent implements OnInit {\r\n\r\n  customer: ICustomer;\r\n  mapEnabled: boolean;\r\n\r\n  constructor(private route: ActivatedRoute, private dataService: DataService) { }\r\n\r\n  ngOnInit() {\r\n    // Subscribe to params so if it changes we pick it up. Could use this.route.parent.snapshot.params[\"id\"] to simplify it.\r\n    this.route.parent.params.subscribe((params: Params) => {\r\n      const id = +params['id'];\r\n      if (id) {\r\n        this.dataService.getCustomer(id)\r\n          .subscribe((customer: ICustomer) => {\r\n            this.customer = customer;\r\n            this.mapEnabled = true;\r\n          });\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n}\r\n","module.exports = \".customer-form input[type='text'], \\r\\n.customer-form input[type='number'],\\r\\n.customer-form input[type='email'],\\r\\n.customer-form select {\\r\\n    width:100%;\\r\\n}\\r\\n\\r\\n.customer-form .ng-invalid {\\r\\n  border-left: 5px solid #a94442;\\r\\n}\\r\\n\\r\\n.customer-form .ng-valid {\\r\\n  border-left: 5px solid #42A948;\\r\\n}\"","module.exports = \"<div>\\r\\n  <form (ngSubmit)=\\\"submit()\\\" #customerForm=\\\"ngForm\\\" class=\\\"customer-form\\\" novalidate>\\r\\n    <div class=\\\"form-group\\\">\\r\\n      <label>Tank ID</label>\\r\\n      <input type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"firstName\\\" [(ngModel)]=\\\"customer.firstName\\\" #firstName=\\\"ngModel\\\" required>\\r\\n      <div class=\\\"alert alert-danger\\\" [hidden]=\\\"firstName.pristine || firstName.valid\\\">Tank ID is required</div>\\r\\n    </div>\\r\\n    <div class=\\\"form-group\\\">\\r\\n      <label>Managed By</label>\\r\\n      <input type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"lastName\\\" [(ngModel)]=\\\"customer.lastName\\\" #lastName=\\\"ngModel\\\" required>\\r\\n      <div class=\\\"alert alert-danger\\\" [hidden]=\\\"lastName.pristine || lastName.valid\\\">Magaged by is required</div>\\r\\n    </div>\\r\\n    <div class=\\\"form-group\\\">\\r\\n      <label>Address</label>\\r\\n      <input type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"address\\\" [(ngModel)]=\\\"customer.address\\\" #address=\\\"ngModel\\\" required>\\r\\n      <div class=\\\"alert alert-danger\\\" [hidden]=\\\"address.pristine || address.valid\\\">Address is required</div>\\r\\n    </div>\\r\\n    <div class=\\\"form-group\\\">\\r\\n      <label>City</label>\\r\\n      <input type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"city\\\" [(ngModel)]=\\\"customer.city\\\" #city=\\\"ngModel\\\" required>\\r\\n      <div class=\\\"alert alert-danger\\\" [hidden]=\\\"city.pristine || city.valid\\\">City is required</div>\\r\\n    </div>\\r\\n    <div class=\\\"form-group\\\">\\r\\n      <label>District</label>\\r\\n      <select class=\\\"form-control\\\" \\r\\n              [(ngModel)]=\\\"customer.state.abbreviation\\\"\\r\\n              name=\\\"state\\\" \\r\\n              required>\\r\\n          <option *ngFor=\\\"let state of states\\\" [ngValue]=\\\"state.abbreviation\\\">{{state.name}}</option>\\r\\n      </select>\\r\\n    </div>\\r\\n    <div *ngIf=\\\"customer\\\">\\r\\n      <div class=\\\"alert alert-warning\\\" *ngIf=\\\"customer.id && deleteMessageEnabled\\\">\\r\\n         Delete Water Tank?&nbsp;&nbsp;<button class=\\\"btn btn-danger\\\" (click)=\\\"delete($event)\\\">Yes</button>&nbsp;&nbsp;\\r\\n         <button class=\\\"btn btn-default\\\" (click)=\\\"deleteMessageEnabled = false\\\">No</button>\\r\\n      </div>\\r\\n      <button class=\\\"btn btn-danger\\\" *ngIf=\\\"customer.id && !deleteMessageEnabled\\\" (click)=\\\"deleteMessageEnabled = true\\\">Delete</button>&nbsp;&nbsp;\\r\\n\\r\\n      <div class=\\\"pull-right\\\" *ngIf=\\\"!deleteMessageEnabled\\\">\\r\\n        <button class=\\\"btn btn-default\\\" (click)=\\\"cancel($event)\\\">Cancel</button>&nbsp;&nbsp;\\r\\n        <button type=\\\"submit\\\" class=\\\"btn btn-success\\\" [disabled]=\\\"customerForm.pristine || !customerForm.valid\\\">{{ operationText }}</button>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"alert alert-danger\\\" *ngIf=\\\"errorMessage != null\\\">{{ errorMessage }}</div>\\r\\n  </form>\\r\\n  <br />\\r\\n</div>\"","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { Router, ActivatedRoute, Params } from '@angular/router';\r\nimport { NgForm } from '@angular/forms';\r\n\r\nimport { DataService } from '../core/services/data.service';\r\nimport { ModalService, IModalContent } from '../core/modal/modal.service';\r\nimport { ICustomer, IState } from '../shared/interfaces';\r\nimport { GrowlerService, GrowlerMessageType } from '../core/growler/growler.service';\r\nimport { LoggerService } from '../core/services/logger.service';\r\n\r\n@Component({\r\n  selector: 'cm-customer-edit',\r\n  templateUrl: './customer-edit.component.html',\r\n  styleUrls: ['./customer-edit.component.css']\r\n})\r\nexport class CustomerEditComponent implements OnInit {\r\n\r\n  customer: ICustomer =\r\n    {\r\n      id: 0,\r\n      firstName: '',\r\n      lastName: '',\r\n      gender: '',\r\n      address: '',\r\n      city: '',\r\n      state: {\r\n        abbreviation: '',\r\n        name: ''\r\n      }\r\n    };\r\n  states: IState[];\r\n  errorMessage: string;\r\n  deleteMessageEnabled: boolean;\r\n  operationText = 'Insert';\r\n  @ViewChild('customerForm') customerForm: NgForm;\r\n\r\n  constructor(private router: Router,\r\n    private route: ActivatedRoute,\r\n    private dataService: DataService,\r\n    private growler: GrowlerService,\r\n    private modalService: ModalService,\r\n    private logger: LoggerService) { }\r\n\r\n  ngOnInit() {\r\n    // Subscribe to params so if it changes we pick it up. Don't technically need that here\r\n    // since param won't be changing while component is alive.\r\n    // Could use this.route.parent.snapshot.params[\"id\"] to simplify it.\r\n    this.route.parent.params.subscribe((params: Params) => {\r\n      const id = +params['id'];\r\n      if (id !== 0) {\r\n        this.operationText = 'Update';\r\n        this.getCustomer(id);\r\n      }\r\n    });\r\n\r\n    this.dataService.getStates().subscribe((states: IState[]) => this.states = states);\r\n  }\r\n\r\n  getCustomer(id: number) {\r\n    this.dataService.getCustomer(id).subscribe((customer: ICustomer) => {\r\n      this.customer = customer;\r\n    });\r\n  }\r\n\r\n  submit() {\r\n    if (this.customer.id === 0) {\r\n      this.dataService.insertCustomer(this.customer)\r\n        .subscribe((insertedCustomer: ICustomer) => {\r\n          if (insertedCustomer) {\r\n            // Mark form as pristine so that CanDeactivateGuard won't prompt before navigation\r\n            this.customerForm.form.markAsPristine();\r\n            this.router.navigate(['/customers']);\r\n          } else {\r\n            const msg = 'Unable to insert customer';\r\n            this.growler.growl(msg, GrowlerMessageType.Danger);\r\n            this.errorMessage = msg;\r\n          }\r\n        },\r\n          (err: any) => this.logger.log(err));\r\n    } else {\r\n      this.dataService.updateCustomer(this.customer)\r\n        .subscribe((status: boolean) => {\r\n          if (status) {\r\n            // Mark form as pristine so that CanDeactivateGuard won't prompt before navigation\r\n            this.customerForm.form.markAsPristine();\r\n            this.growler.growl('Operation performed successfully.', GrowlerMessageType.Success);\r\n            // this.router.navigate(['/customers']);\r\n          } else {\r\n            const msg = 'Unable to update customer';\r\n            this.growler.growl(msg, GrowlerMessageType.Danger);\r\n            this.errorMessage = msg;\r\n          }\r\n        },\r\n          (err: any) => this.logger.log(err));\r\n    }\r\n  }\r\n\r\n  cancel(event: Event) {\r\n    event.preventDefault();\r\n    // Route guard will take care of showing modal dialog service if data is dirty\r\n    this.router.navigate(['/customers']);\r\n  }\r\n\r\n  delete(event: Event) {\r\n    event.preventDefault();\r\n    this.dataService.deleteCustomer(this.customer.id)\r\n      .subscribe((status: boolean) => {\r\n        if (status) {\r\n          this.router.navigate(['/customers']);\r\n        } else {\r\n          this.errorMessage = 'Unable to delete customer';\r\n        }\r\n      },\r\n        (err) => this.logger.log(err));\r\n  }\r\n\r\n  canDeactivate(): Promise<boolean> | boolean {\r\n    if (!this.customerForm.dirty) {\r\n      return true;\r\n    }\r\n\r\n    // Dirty show display modal dialog to user to confirm leaving\r\n    const modalContent: IModalContent = {\r\n      header: 'Lose Unsaved Changes?',\r\n      body: 'You have unsaved changes! Would you like to leave the page and lose them?',\r\n      cancelButtonText: 'Cancel',\r\n      OKButtonText: 'Leave'\r\n    };\r\n    return this.modalService.show(modalContent);\r\n  }\r\n\r\n}\r\n","module.exports = \"<div class=\\\"container\\\">\\r\\n    <div class=\\\"row\\\" *ngIf=\\\"customer && customer.orders\\\">\\r\\n        <h4>Orders for {{ customer.firstName | capitalize }} {{ customer.lastName | capitalize }}</h4>\\r\\n        <br />\\r\\n        <table class=\\\"table table-striped table-hover orders-table\\\">\\r\\n            <tr *ngFor=\\\"let order of customer.orders;trackBy:ordersTrackBy\\\">\\r\\n                <td>{{ order.productName }}</td>\\r\\n                <td class=\\\"text-right\\\">{{ order.itemCost | currency:'USD':'symbol' }}</td>    \\r\\n            </tr>\\r\\n            <tr class=\\\"summary-border\\\">\\r\\n                <td>&nbsp;</td>\\r\\n                <td class=\\\"text-right\\\">{{ customer.orderTotal | currency:'USD':'symbol' }}</td>\\r\\n            </tr>\\r\\n        </table>\\r\\n    </div>\\r\\n    <div *ngIf=\\\"customer && !customer.orders\\\" class=\\\"row\\\">\\r\\n        No water level found\\r\\n    </div> \\r\\n    <div *ngIf=\\\"!customer\\\" class=\\\"row\\\">\\r\\n        No water tank found\\r\\n    </div>  \\r\\n</div>\"","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Params } from '@angular/router';\r\n\r\nimport { DataService } from '../core/services/data.service';\r\nimport { ICustomer, IOrder, IOrderItem } from '../shared/interfaces';\r\n\r\n@Component({\r\n  selector: 'cm-customer-orders',\r\n  templateUrl: './customer-orders.component.html'\r\n})\r\nexport class CustomerOrdersComponent implements OnInit {\r\n\r\n  orders: IOrder[] = [];\r\n  customer: ICustomer;\r\n\r\n  constructor(private route: ActivatedRoute, private dataService: DataService) { }\r\n\r\n  ngOnInit() {\r\n      // Subscribe to params so if it changes we pick it up.  Could use this.route.parent.snapshot.params[\"id\"] to simplify it.\r\n      this.route.parent.params.subscribe((params: Params) => {\r\n        const id = +params['id'];\r\n        this.dataService.getCustomer(id).subscribe((customer: ICustomer) => {\r\n          this.customer = customer;\r\n        });\r\n      });\r\n  }\r\n\r\n  ordersTrackBy(index: number, orderItem: any) {\r\n    return index;\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\n\r\nimport { CustomerComponent } from './customer.component';\r\nimport { CustomerOrdersComponent } from './customer-orders.component';\r\nimport { CustomerDetailsComponent } from './customer-details.component';\r\nimport { CustomerEditComponent } from './customer-edit.component';\r\nimport { CanActivateGuard } from './can-activate.guard';\r\nimport { CanDeactivateGuard } from './can-deactivate.guard';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: CustomerComponent,\r\n    children: [\r\n      { path: 'orders', component: CustomerOrdersComponent },\r\n      { path: 'details', component: CustomerDetailsComponent },\r\n      {\r\n        path: 'edit',\r\n        component: CustomerEditComponent,\r\n        canActivate: [CanActivateGuard],\r\n        canDeactivate: [CanDeactivateGuard]\r\n      }\r\n    ]\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n  providers: [CanActivateGuard, CanDeactivateGuard]\r\n})\r\nexport class CustomerRoutingModule {\r\n  static components = [CustomerComponent, CustomerOrdersComponent, CustomerDetailsComponent, CustomerEditComponent];\r\n}\r\n\r\n","module.exports = \"<div class=\\\"orders view\\\">\\r\\n    <div class=\\\"container\\\">\\r\\n        <header>\\r\\n            <h3><span class=\\\"glyphicon glyphicon-tint\\\"></span>&nbsp;&nbsp;Water Tank Information</h3>\\r\\n        </header>\\r\\n        <br />\\r\\n        <div class=\\\"navbar\\\">\\r\\n            <ul class=\\\"nav navbar-nav\\\">\\r\\n                <li class=\\\"toolbar-item\\\">\\r\\n                    <a routerLink=\\\"details\\\" routerLinkActive=\\\"active\\\">\\r\\n                       <span class=\\\"glyphicon glyphicon-list\\\"></span>&nbsp;&nbsp;Water Tank Details\\r\\n                    </a>\\r\\n                </li>\\r\\n                <li class=\\\"toolbar-item\\\">\\r\\n                    <a routerLink=\\\"orders\\\" routerLinkActive=\\\"active\\\">\\r\\n                        <span class=\\\"glyphicon glyphicon-tags\\\"></span>&nbsp;&nbsp;Water Levels\\r\\n                    </a>\\r\\n                </li>\\r\\n                <li class=\\\"toolbar-item\\\">\\r\\n                    <a routerLink=\\\"edit\\\" routerLinkActive=\\\"active\\\">\\r\\n                        <span class=\\\"glyphicon glyphicon-edit\\\"></span>&nbsp;&nbsp;Edit Water Tank\\r\\n                    </a>\\r\\n                </li>\\r\\n            </ul>\\r\\n        </div>\\r\\n        <div class=\\\"container\\\">\\r\\n            <router-outlet></router-outlet>\\r\\n            <br />\\r\\n            <br />\\r\\n            <a routerLink=\\\"/customers\\\">View all Water Tanks</a>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\"","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'cm-orders',\r\n  templateUrl: './customer.component.html'\r\n})\r\nexport class CustomerComponent implements OnInit {\r\n\r\n    // displayMode: CustomerDisplayModeEnum;\r\n    // displayModeEnum = CustomerDisplayModeEnum;\r\n\r\n    constructor(private router: Router) { }\r\n\r\n    ngOnInit() {\r\n\r\n      // No longer needed due to routerLinkActive feature in Angular\r\n      // const path = this.router.url.split('/')[3];\r\n      // switch (path) {\r\n      //   case 'details':\r\n      //     this.displayMode = CustomerDisplayModeEnum.Details;\r\n      //     break;\r\n      //   case 'orders':\r\n      //     this.displayMode = CustomerDisplayModeEnum.Orders;\r\n      //     break;\r\n      //   case 'edit':\r\n      //     this.displayMode = CustomerDisplayModeEnum.Edit;\r\n      //     break;\r\n      // }\r\n    }\r\n\r\n}\r\n\r\n// enum CustomerDisplayModeEnum {\r\n//   Details=0,\r\n//   Orders=1,\r\n//   Edit=2\r\n// }\r\n","import { NgModule } from '@angular/core';\r\n\r\nimport { SharedModule } from '../shared/shared.module';\r\nimport { CustomerRoutingModule } from './customer-routing.module';\r\n\r\n@NgModule({\r\n  imports: [CustomerRoutingModule, SharedModule],\r\n  declarations: [CustomerRoutingModule.components]\r\n})\r\nexport class CustomerModule { }\r\n"],"sourceRoot":""}